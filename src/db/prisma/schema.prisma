generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Downloads {
  id        String     @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  createdAt DateTime   @default(now()) @map("createdAt") @db.Timestamp
  userId    String     @map("userId") @db.Uuid
  spaceUrl  String     @map("spaceUrl")
  isDeleted Boolean    @default(false) @map("isDeleted")
  status    Status     @default(pending)
  spaceFile SpaceFiles @relation(fields: [spaceUrl], references: [spaceUrl])

  @@unique([userId, spaceUrl], name: "unique_user_space")
  @@map("downloads")
}

model SpaceFiles {
  id         String      @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  spaceUrl   String      @unique @map("spaceUrl")
  filename   String
  created_at DateTime    @default(now()) @map("created_at") @db.Timestamp
  downloads  Downloads[]

  @@map("space_files")
}

enum Status {
  pending
  completed
  failed
}
